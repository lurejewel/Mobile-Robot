# Mobile-Robot
functions for four-wheel mobile robot

2020NKU智能工程大作业。注释较少，见谅。

实验一：前轮驱动的四轮机器人运动学模型测试。测试代码在Mainfunction.m的“实验一”。运动学模型函数在FourWheelRobot_KinematicModel.m，分为含里程计误差（“gaussn”）和不含里程计误差（“normal”）两种。该运动学模型输入为左前轮的偏角和转速，输出为机器人的速度和角速度。Mainfunction中用欧拉法将速度和角速度变为位姿信息。绘制走过的路径点用红色圆圈，当前时刻的机器人用红色长方形，目标地点的机器人用蓝色长方形，下同。机器人绘制在DrawRobot.m。

实验二：机器人定点控制算法测试。测试代码在Mainfunction.m的“实验二”，控制代码在PointControl.m。采用基于极坐标的非线性控制器（在课件中可以找到）。由于四轮车和二轮差分车的差异，极坐标变换部分beta的定义和课件中有所不同。对速度做了分段限幅，机器人快要到达目标点时，降低速度。注：目前版本还不能实现倒车。

实验三四：机器人路径跟踪算法测试。测试代码在Mainfunction.m的“实验三”“实验四”，跟踪代码在PathTracking.m和PathTracking_withOdom.m。提供正弦和正方形两种路径，具体算法是将路径离散成点之后再用定点控制驱使机器人移动，并且做了误差信号前移保证移动过程的快速性。是一种比较偷懒的做法。最后一个点好像是会报错，但我懒得debug了。一个是有里程计误差的，一个是没有的。注意速度不要太快，否则机器人可能会晕头转向。

实验五：ICP定位。地图构建在CreateMap.m，获取激光点云在GetPointSet.m，ICP算法部分在Mainfunction.m的“实验五”。ICP算法对平移误差不敏感，对旋转误差敏感（迭代次数翻数倍）。建图约需数分钟时间，所以该代码暂时不能保证实时性。

实验六：EKFSLAM。借鉴了@AtsushiSakai的EKFSLAM代码，说实话有些地方我没看懂。大佬果然是大佬。

实验七：栅格地图生成（在LM2Grid）。将实验六中预测的路标生成栅格地图。比较简陋。

实验八：ASTAR算法路径规划（在LM2Grid）。g选的是欧氏距离，h选的是曼哈顿距离保证效率，f=g+h作为估价函数。

Mainfunction包含了几个仿真实验，因为代码量较少所以合并在一个文件里了。用哪一个的时候把那一段代码取消注释即可。
